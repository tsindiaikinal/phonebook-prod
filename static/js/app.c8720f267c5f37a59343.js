webpackJsonp([1],{"2YUV":function(e,t){},"7zck":function(e,t){},B1b4:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"mutations",function(){return g});var n={};a.d(n,"users",function(){return k}),a.d(n,"editedItem",function(){return C}),a.d(n,"defaultItem",function(){return w});var s=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")(null,r,!1,function(e){a("2YUV")},null,null).exports,l=a("/ocq"),c=a("3EgV"),d=a.n(c),u=a("woOf"),m=a.n(u),f={data:function(){return{search:"",dialog:!1,image:null,editedIndex:-1,valid:!0,name:"",phoneRules:[function(e){return!!e||"Phone number is required"}],companyRules:[function(e){return!!e||"Company is required"},function(e){return e&&e.length<=15||"Name must be less than 15 characters"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],email:"",rules:{required:function(e){return!!e||"Email is Required."},counter:function(e){return e.length<=20||"Max 20 characters"},email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."}},headers:[{text:"№",align:"left",sortable:!1},{text:"Фото",value:"photo"},{text:"Имя/Фамилия",value:"yourname"},{text:"Телефон",value:"phone"},{text:"Email",value:"email"},{text:"Компания",value:"company"},{text:"Форматирование",sortable:!1}],editedItem:{id:"",photo:"",yourname:"",phone:"",email:"",company:""},defaultItem:{photo:"",yourname:"",phone:"",email:"",company:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Новый контакт":"Редактировать контакт"},phbHeaders:function(){return this.$store.getters.headers},users:{get:function(){return this.$store.getters.users},set:function(){}}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize()},methods:{sync:function(e){var t=this,a=this.defaultItem.photo=event.target.files[0],i=new FileReader;i.onload=function(e){t.editedItem.photo=i.result},i.readAsDataURL(a),this.image=a},upload:function(){this.$refs.fileInput.click()},initialize:function(){var e=this;this.users=[],this.db().ref("phonebook/").once("value").then(function(t){t.forEach(function(t){e.users.push(t.val())})})},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=m()({},e),this.dialog=!0},deleteItem:function(e){var t=this,a=this.users.indexOf(e),i=confirm("Вы уверены в том, что хотите удалить этот элемент?")&&this.users.splice(a,1);this.db().ref("phonebook/").once("value").then(function(a){a.forEach(function(a){a.key===e.id&&!1!==i&&(t.db().ref("phonebook/"+a.key).set(null),alert("Контакт успешно удален из базы данных"))})})},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=m()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this,t=this.editedItem;if(this.editedIndex>-1){var a=m()(this.users[this.editedIndex],this.editedItem);console.log(a),console.log(this.editedItem.id),this.db().ref("phonebook/").once("value").then(function(a){a.forEach(function(a){(console.log("Elem key: "+a.key+" | EditedItem id: "+t.id),a.key===t.id)&&e.db().ref("phonebook/"+a.key).update({photo:t.photo,yourname:t.yourname,phone:t.phone,email:t.email,company:t.company})})})}else{this.users.push(this.editedItem);var i=this.db().ref("phonebook/").push().key;this.editedItem.id=i,this.db().ref("phonebook/"+i).set(this.editedItem)}this.close()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",[a("h1",{staticClass:"display-1 pa-2"},[e._v("Телефонная книга")]),e._v(" "),a("v-card",[a("v-card-title",{staticClass:"title bar-shadow"},[e._v("\n      Контакты\n      "),a("v-spacer"),e._v(" "),a("v-avatar",{attrs:{id:"cat",size:48,tile:!0}}),e._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:"Найти...","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("v-toolbar",{staticClass:"non-shadow",attrs:{color:"white"}},[a("v-spacer"),e._v(" "),a("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"#28a745",dark:""}},i),[e._v("Добавить")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),a("v-card",{attrs:{id:"dialog"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md12:""}},[a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",id:"addfiles"},on:{change:e.sync}}),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"blue-grey",title:"Загрузите ваше фото"},on:{click:e.upload}},[e._v("\n                  Upload\n                    "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("cloud_upload")])],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{counter:20,rules:e.nameRules,required:"",label:"Имя/Фамилия"},model:{value:e.editedItem.yourname,callback:function(t){e.$set(e.editedItem,"yourname",t)},expression:"editedItem.yourname"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{counter:15,rules:e.phoneRules,required:"",label:"Телефон"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.email],label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{rules:e.companyRules,label:"Компания"},model:{value:e.editedItem.company,callback:function(t){e.$set(e.editedItem,"company",t)},expression:"editedItem.company"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-3",flat:""},on:{click:e.close}},[e._v("Отмена")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-3",flat:""},on:{click:e.save}},[e._v("Сохранить")])],1)],1)],1)],1),e._v(" "),a("v-data-table",{staticClass:"elevation-3",attrs:{headers:e.headers,items:e.users,search:e.search},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.index+1))]),e._v(" "),a("td",{staticClass:"text-xs-left py-2"},[a("v-avatar",[t.item.photo?a("img",{attrs:{src:t.item.photo,alt:"Your photo",width:"80px",height:"80px"}}):e._e()])],1),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.yourname))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.phone))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.email))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.company))]),e._v(" "),a("td",{staticClass:"justify-center mr-5 align-items-center layout px-2"},[a("v-icon",{staticClass:"mr-2 pt-3",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("\n        edit\n      ")]),e._v(" "),a("v-icon",{staticClass:"pt-3",attrs:{small:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("\n        delete\n      ")])],1)]}}])},[e._v(" "),a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"},scopedSlots:e._u([{key:"no-results",fn:function(){return[e._v('\n      Ваш поиск "'+e._s(e.search)+'" не дал результатов.\n    ')]},proxy:!0}])})],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,h,!1,function(e){a("B1b4")},"data-v-8be59b8c",null).exports,p={data:function(){return{pathPhoto:"",valid:!0,name:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],email:"",rules:{required:function(e){return!!e||"Required."},counter:function(e){return e.length<=20||"Max 20 characters"},email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."}},dialog:!1,headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Actions",value:"name",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}},methods:{photo:function(){this.pathPhoto=event.target.value},submit:function(){this.$v.$touch()},initialize:function(){this.desserts=[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7}]},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=m()({},e),this.dialog=!0},deleteItem:function(e){var t=this.desserts.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(t,1)},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=m()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){this.editedIndex>-1?m()(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize()}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"card"},[e._m(0),e._v(" "),a("div",{staticClass:"user-face-img"},[e.img?e._e():a("label",{staticClass:"fa fa-user-circle face-label",attrs:{for:"user-face",title:"Ваше фото"}}),e._v(" "),a("input",{attrs:{type:"file",title:"Загрузить фото",id:"user-face"},on:{click:function(t){return e.photo()}}})]),e._v(" "),a("div",{staticClass:"card-block"},[a("div",{staticClass:"input-container"},[a("v-text-field",{attrs:{label:"Ваше имя","prepend-icon":"fa-user",counter:10,rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{label:"№ тел:",counter:15,"prepend-icon":"fa-phone",type:"phone",required:""}}),e._v(" "),a("v-text-field",{attrs:{label:"Ваш email","prepend-icon":"fa-envelope",rules:[e.rules.required,e.rules.email]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{label:"Компания","prepend-icon":"fa-building"}}),e._v(" "),a("v-btn",{staticClass:"caption white--text",attrs:{small:"",color:"#4CAF50"},on:{click:e.submit}},[e._v("отправить")])],1),e._v(" "),a("div",{staticClass:"user-photo"})]),e._v(" "),a("div",[e._v(e._s(e.pathPhoto))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pathPhoto,expression:"pathPhoto"}],attrs:{type:"text",name:"",id:""},domProps:{value:e.pathPhoto},on:{input:function(t){t.target.composing||(e.pathPhoto=t.target.value)}}}),e._v(" "),a("v-btn",{staticClass:"v-btn-back",attrs:{color:"blue-grey",small:""}},[a("router-link",{staticClass:"text-capitalize white--text",attrs:{to:"/"}},[a("v-icon",{staticClass:"vicon",attrs:{dark:"",left:""}},[e._v("arrow_back")]),e._v("Назад")],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-block"},[t("h4",{staticClass:"headline"},[this._v("Добавить контакт")])])}]};var x=a("VU/8")(p,b,!1,function(e){a("WZaI")},null,null).exports;s.default.use(d.a),s.default.use(l.a);var _=new l.a({routes:[{path:"",name:"home",component:v},{path:"/contact",name:"addContact",component:x}]}),I=a("NYxO"),g=function(e){},y=a("mUbh"),k=function(e){return e.users},C=function(e){return e.editedItem},w=function(e){return e.defaultItem};s.default.use(I.a);var R=new I.a.Store({state:{users:[]},mutations:i,actions:y,getters:n}),q=a("kxiW"),z=a.n(q);a("7zck"),a("gJtD");s.default.component("app-bodybook",v),s.default.component("app-card",x);var E=z.a.initializeApp({apiKey:"AIzaSyAL0iy49xGfJ0iBGFkyBR9t9LKHuLgQ7GA",authDomain:"phonebook-774b3.firebaseapp.com",databaseURL:"https://phonebook-774b3.firebaseio.com",projectId:"phonebook-774b3",storageBucket:"phonebook-774b3.appspot.com",messagingSenderId:"845673005921"}).database();s.default.mixin({methods:{db:function(){return E}}}),new s.default({el:"#app",router:_,store:R,components:{App:o},template:"<App/>"})},WZaI:function(e,t){},gJtD:function(e,t){},mUbh:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c8720f267c5f37a59343.js.map